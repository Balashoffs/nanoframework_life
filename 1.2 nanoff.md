# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É `nanoff` –¥–ª—è .NET nanoFramework

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ `nanoff`?
[–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/nanoframework/nanoFirmwareFlasher)

`nanoff` ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è .NET nanoFramework, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ü—Ä–æ—à–∏–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å .NET nanoFramework (nanoCLR –∏ nanoBooter)
- –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ—à–∏–≤–∫–∏ (OTA)
- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç—ã, JTAG –∏–ª–∏ DFU
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—ã–π .NET CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –≤–∫–ª—é—á–∞—è ESP32, STM32, TI CC13x2 –∏ –¥—Ä—É–≥–∏–µ.

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### Windows

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ .NET SDK –≤–µ—Ä—Å–∏–∏ 6.0 –∏–ª–∏ –≤—ã—à–µ [–°—Å—ã–ª–∫–∞](https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/sdk-8.0.413-windows-x64-installer)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   dotnet tool install -g nanoff
3. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é PATH.
4. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
    ```bash
    nanoff --version
    -------------------------
    nanoff 2.5.126+716b21797a
### Linux
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ .NET SDK –≤–µ—Ä—Å–∏–∏ 6.0 –∏–ª–∏ –≤—ã—à–µ. [–°—Å—ã–ª–∫–∞](https://learn.microsoft.com/en-us/dotnet/core/install/linux?WT.mc_id=dotnet-35129-website)
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    dotnet tool install -g nanoff
3. –î–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PATH:
    ```bash
    export PATH=$PATH:~/.dotnet/tools
4. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
    ```bash
    nanoff --version
    -------------------------
    nanoff 2.5.126+716b21797a
### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
1. –ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é nanoff, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
    ```bash
    dotnet tool update -g nanoff
### –ë–∞–∑—ã–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è
1. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã nanoff, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–º–µ–Ω–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤–≤–æ–¥–∞.
    ```bash
    nanoff [command] [args]
    –≥–¥–µ commad - 
2. –ë–∞–∑–æ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã 
    - platform - –ø–æ–¥–¥–µ—Ä–¥–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã ESP32, STM32, TI CC13x2, Silabs Giant Gecko
    - com - com –ø–æ—Ä—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    - target - –∏–º—è –ø—Ä–æ—à–∏–≤–∫–∏ –≠—Ç–æ –∏–º—è –ø—Ä–æ—à–∏–≤–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö GitHub –∏ Cloudsmith. (https://cloudsmith.io/~net-nanoframework/repos/nanoframework-images/packages/)
    - file - –∏–º—è —Ñ–∞–π–ª–∞ –ø—Ä–æ—à—à–∏–≤–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –¥–∏—Å–∫–µ
    - image - –∏–º—è (–ø—É—Ç—å) –∫ –æ–±—Ä–∞–∑—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
## üß≠ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º –Ω–∞ –±–∞–∑–µ ESP32
1. –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
```bash
nanoff --listports
--------------------
Available COM ports:
COM11
```
2. –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã [platform]
```bash
nanoff --listtargets --platform [platform]
```
#### –ü—Ä–∏–º–µ—Ä: 
```bash
nanoff --listtargets --platform ESP32
--------------------
Available targets:
M5StickCPlus
    1.12.4.448
    1.12.4.434
    1.12.4.413
M5Core2
    1.12.4.448
    1.12.4.434
    1.12.4.413
M5StickC
    1.12.4.448
    1.12.4.434
    1.12.4.413
...........
```   
3. –û—Ç—Ä–±—Ä–∞–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ [platform] –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É [com]
```bash
nanoff --platform [platform] --serialport [com] --devicedetails 
```
#### –ü—Ä–∏–º–µ—Ä: 
```bash
nanoff --platform ESP32 --serialport COM11 --devicedetails 
------------------------------
Reading details from chip...OK                                                                                  
Connected to:
ESP32 (ESP32-D0WD-V3 (revision v3.1))
Features WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme  None
Flash size 4MB unknown from  (manufacturer 0x104 device 0x16406)
PSRAM: undetermined
Crystal 40MHz
MAC A8:42:E3:AE:81:AC
```
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ [target] –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É [com]
```bash
nanoff --update --target [target] --serialport [com]
```
#### –ü—Ä–∏–º–µ—Ä: 
```bash
nanoff --update --target ESP32_REV3 --serialport COM11
--------------------------------
Reading details from chip...OK                                                                                          

Connected to:
ESP32 (ESP32-D0WD-V3 (revision v3.1))
Features WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
Flash size 4MB unknown from  (manufacturer 0x104 device 0x16406)
PSRAM: undetermined
Crystal 40MHz
MAC A8:42:E3:AE:81:AC

Extracting ESP32_REV3-1.12.4.448.zip...OK

Updating to 1.12.4.448

Backup configuration...
Backup configuration...OK                                                                                               
Flashing firmware...
Flashing firmware...OK         
```
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ [target] –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É [com] –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```bash
nanoff --update --target [target] --serialport [com] --clrfile [file]
```
#### –ü—Ä–∏–º–µ—Ä: 
```bash
nanoff --update --target ESP32_REV3 --serialport COM11 --crlfile "C:\Users\abba\Downloads\ESP32_REV3-1.12.4.448\nanoCLR.bin"
--------------------------------
Reading details from chip...OK                                                                                          

Connected to:
ESP32 (ESP32-D0WD-V3 (revision v3.1))
Features WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
Flash size 4MB unknown from  (manufacturer 0x104 device 0x16406)
PSRAM: undetermined
Crystal 40MHz
MAC A8:42:E3:AE:81:AC

Extracting ESP32_REV3-1.12.4.448.zip...OK

Updating to 1.12.4.448

Backup configuration...
Backup configuration...OK                                                                                               
Flashing firmware...
Flashing firmware...OK         
```
6. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω–∏—è[image]  –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É [com] –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```bash
nanoff --target [target] --serialport [com] --deploy --image [image]
```
#### –ü—Ä–∏–º–µ—Ä: 
```bash
nanoff --update --target ESP32_REV3 --deploy --image "E:\git\nanoframwork\Samples\samples\Blinky\Blinky\bin\Release\Blinky.bin" --address 0x1B000
--------------------------------
Reading details from chip...OK                                                                                          

Connected to:
ESP32 (ESP32-D0WD-V3 (revision v3.1))
Features WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
Flash size 4MB unknown from  (manufacturer 0x104 device 0x16406)
PSRAM: undetermined
Crystal 40MHz
MAC A8:42:E3:AE:81:AC

Extracting ESP32_REV3-1.12.4.448.zip...OK

Updating to 1.12.4.448

Backup configuration...
Backup configuration...OK                                                                                               
Flashing firmware...
Flashing firmware...OK         
```

### –í–Ω–∏–º–∞–Ω–∏–µ!!!
–ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–ª–∞—Ç–∞—Ö ESP32 –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ —Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑—á–∏–∫–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å, —É–¥–µ—Ä–∂–∏–≤–∞—è –∫–Ω–æ–ø–∫—É BOOT/FLASH –Ω–∞ –ø–ª–∞—Ç–µ. –ï—Å–ª–∏ nanoff –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —ç—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:

*** –£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É BOOT/FLASH –Ω–∞ –ø–ª–∞—Ç–µ ESP32 ***

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è FeatherS2, TinyS2 –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥—É–ª–µ–π S3 –ø–ª–∞—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ —Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏, —É–¥–µ—Ä–∂–∏–≤–∞—è –∫–Ω–æ–ø–∫—É [BOOT], –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É [RESET] –∏ –æ—Ç–ø—É—Å—Ç–∏–≤ –∫–Ω–æ–ø–∫—É [BOOT].

## üß≠ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º –Ω–∞ –±–∞–∑–µ STM32
–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è